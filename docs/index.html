<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>kontrolle</title><meta name="description" content="Documentation for kontrolle"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script><link rel="stylesheet" href="assets/custom.css"/></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">kontrolle</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1> kontrolle </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#overview" id="overview" style="color: inherit; text-decoration: none;">
  <h1>Overview</h1>
</a>
<p>This module works by defining a set of roles, permissions and features single user has and checking to see if a said user possesses a certain capability, either by checking if specific role exists or feature is available. This allows you to determine whether a user should have access to a given resource or operation. Features can be extended with specific variations (like alpha or beta) that can be further checked at evaluation. The module is written in Typescript and compiles to commonjs.</p>

<a href="#table-of-contents" id="table-of-contents" style="color: inherit; text-decoration: none;">
  <h2>Table of Contents</h2>
</a>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#test">Test</a></li>
<li><a href="#build">Build</a></li>
<li><a href="#document">Document</a></li>
<li><a href="#usage">Usage</a><ul>
<li><a href="#initialization">Initialization</a></li>
<li><a href="#evaluation">Evaluation</a></li>
</ul>
</li>
</ul>

<a href="#instalation" id="instalation" style="color: inherit; text-decoration: none;">
  <h2>Instalation</h2>
</a>
<p>This module is distributed via <a href="https://www.npmjs.com/">npm</a> which is bundled with <a href="https://nodejs.org/en/">node</a> and should be installed as one of your project&#39;s <code>dependencies</code>:</p>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">install</span><span class="hl-1"> --</span><span class="hl-0">save</span><span class="hl-1"> </span><span class="hl-0">rbac</span>
</code></pre>

<a href="#test" id="test" style="color: inherit; text-decoration: none;">
  <h2>Test</h2>
</a>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">test</span>
</code></pre>

<a href="#build" id="build" style="color: inherit; text-decoration: none;">
  <h2>Build</h2>
</a>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">build</span>
</code></pre>

<a href="#document" id="document" style="color: inherit; text-decoration: none;">
  <h2>Document</h2>
</a>
<pre><code><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-0">run</span><span class="hl-1"> </span><span class="hl-0">doc</span>
</code></pre>

<a href="#usage" id="usage" style="color: inherit; text-decoration: none;">
  <h2>Usage</h2>
</a>

<a href="#initialization" id="initialization" style="color: inherit; text-decoration: none;">
  <h3>Initialization</h3>
</a>
<p>Here&#39;s a simple example of library initialization:</p>
<pre><code><span class="hl-2">import</span><span class="hl-1"> </span><span class="hl-3">*</span><span class="hl-1"> </span><span class="hl-2">as</span><span class="hl-1"> </span><span class="hl-0">kontrolle</span><span class="hl-1"> </span><span class="hl-2">from</span><span class="hl-1"> </span><span class="hl-4">&#39;kontrolle&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">roles</span><span class="hl-1"> = [</span><span class="hl-4">&#39;userAdmin&#39;</span><span class="hl-1">, </span><span class="hl-4">&#39;agencyAdmin&#39;</span><span class="hl-1">];</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">permissions</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-0">agencies:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">basic:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">action:</span><span class="hl-1"> [</span><span class="hl-4">&#39;view&#39;</span><span class="hl-1">, </span><span class="hl-4">&#39;update&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">users:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-0">basic:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-0">action:</span><span class="hl-1"> [</span><span class="hl-4">&#39;create&#39;</span><span class="hl-1">, </span><span class="hl-4">&#39;read&#39;</span><span class="hl-1">, </span><span class="hl-4">&#39;update&#39;</span><span class="hl-1">]</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">}</span><br/><span class="hl-3">const</span><span class="hl-1"> </span><span class="hl-5">features</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;agencyAdmin&quot;</span><span class="hl-0">:</span><span class="hl-1">{</span><br/><span class="hl-1">       </span><span class="hl-4">&quot;agencies&quot;</span><span class="hl-0">:</span><span class="hl-1">[</span><br/><span class="hl-1">          </span><span class="hl-4">&quot;basic&quot;</span><br/><span class="hl-1">       ]</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-4">&quot;usersAdmin&quot;</span><span class="hl-0">:</span><span class="hl-1">{</span><br/><span class="hl-1">       </span><span class="hl-4">&quot;users&quot;</span><span class="hl-0">:</span><span class="hl-1">[</span><br/><span class="hl-1">          </span><span class="hl-4">&quot;basic&quot;</span><br/><span class="hl-1">       ]</span><br/><span class="hl-1">     }</span><br/><span class="hl-1">}</span><br/><br/><span class="hl-0">kontrolle</span><span class="hl-1">.</span><span class="hl-6">init</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-0">roles</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">permissions</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-0">features</span><br/><span class="hl-1">})</span>
</code></pre>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><div class="tree"><div class="tree-config"><button class="tree-config__button tree-config__button--expand js-tree-expand" title="Expand All"><svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" viewBox="0 0 490.72 490.72" fill="currentColor"><path d="M480.027,288.027H10.693c-5.867,0-10.667,4.8-10.667,10.667c0,5.867,4.8,10.667,10.667,10.667h213.333v144.96l-45.76-45.76c-4.267-4.053-10.987-3.947-15.04,0.213c-3.947,4.16-3.947,10.667,0,14.827l64,64c4.16,4.16,10.88,4.16,15.04,0l64-64c4.053-4.267,3.947-10.987-0.213-15.04c-4.16-3.947-10.667-3.947-14.827,0l-45.867,45.76V309.36h234.667c5.867,0,10.667-4.8,10.667-10.667C490.693,292.827,485.893,288.027,480.027,288.027z"></path><path d="M10.693,224.027h469.333c5.867,0,10.667-4.8,10.667-10.667c0-5.867-4.8-10.667-10.667-10.667H245.36V36.4l45.76,45.76c4.267,4.053,10.987,3.947,15.04-0.213c3.947-4.16,3.947-10.667,0-14.827l-64-64c-4.16-4.16-10.88-4.16-15.04,0l-64,64c-4.053,4.267-3.947,10.987,0.213,15.04c4.16,3.947,10.667,3.947,14.827,0l45.867-45.76v166.293H10.693c-5.867,0-10.667,4.8-10.667,10.667C0.027,219.227,4.827,224.027,10.693,224.027z"></path></svg></button><button class="tree-config__button tree-config__button--collapse js-tree-collapse" title="Collapse All"><svg viewBox="0 0 16 16" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"></path></svg></button><button class="tree-config__button tree-config__button--target js-tree-target" title="Scroll to current file"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="currentColor"><circle cx="12" cy="12" r="3"></circle><path d="M13 4.069V2h-2v2.069A8.008 8.008 0 0 0 4.069 11H2v2h2.069A8.007 8.007 0 0 0 11 19.931V22h2v-2.069A8.007 8.007 0 0 0 19.931 13H22v-2h-2.069A8.008 8.008 0 0 0 13 4.069zM12 18c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z"></path></svg></button></div><div class="tree-content"><ul class="js-category-list category" data-id="root"><li><span class="js-category-title category__title" data-id="root-lib"><div class="category__folder" data-id="root-lib"></div>lib</span><ul class="js-category-list category" data-id="root-lib"><li><a class="category__link js-category-link category__link--ts" href="modules/kontrolle.html" data-id="/modules/kontrolle.html">index.ts</a><ul><li class="tsd-kind-variable tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#DEFAULT_OPTIONS" data-id="/modules/kontrolle.html#DEFAULT_OPTIONS">DEFAULT_OPTIONS</a></li><li class="tsd-kind-function tsd-parent-kind-module tsd-has-type-parameter"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#can" data-id="/modules/kontrolle.html#can">can</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#canAll" data-id="/modules/kontrolle.html#canAll">canAll</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#canAllActions" data-id="/modules/kontrolle.html#canAllActions">canAllActions</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#canAny" data-id="/modules/kontrolle.html#canAny">canAny</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#create" data-id="/modules/kontrolle.html#create">create</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#createFeatures" data-id="/modules/kontrolle.html#createFeatures">createFeatures</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#createPermission" data-id="/modules/kontrolle.html#createPermission">createPermission</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#createPermissions" data-id="/modules/kontrolle.html#createPermissions">createPermissions</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#createRole" data-id="/modules/kontrolle.html#createRole">createRole</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#createRoles" data-id="/modules/kontrolle.html#createRoles">createRoles</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#hasFeature" data-id="/modules/kontrolle.html#hasFeature">hasFeature</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#hasRole" data-id="/modules/kontrolle.html#hasRole">hasRole</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/kontrolle.html#init" data-id="/modules/kontrolle.html#init">init</a></li></ul></li><li><a class="category__link js-category-link category__link--ts" href="modules/lib_feature.html" data-id="/modules/lib_feature.html">feature.ts</a><ul><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/lib_feature.html#Feature" data-id="/modules/lib_feature.html#Feature">Feature</a></li></ul></li><li><a class="category__link js-category-link category__link--ts" href="modules/lib_helpers.html" data-id="/modules/lib_helpers.html">helpers.ts</a><ul><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/lib_helpers.html#createName" data-id="/modules/lib_helpers.html#createName">createName</a></li><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/lib_helpers.html#decodeName" data-id="/modules/lib_helpers.html#decodeName">decodeName</a></li><li class="tsd-kind-function tsd-parent-kind-module tsd-has-type-parameter"><a class="category__link tsd-kind-icon js-category-link" href="modules/lib_helpers.html#isArray" data-id="/modules/lib_helpers.html#isArray">isArray</a></li><li class="tsd-kind-function tsd-parent-kind-module tsd-has-type-parameter"><a class="category__link tsd-kind-icon js-category-link" href="modules/lib_helpers.html#isEmptyArray" data-id="/modules/lib_helpers.html#isEmptyArray">isEmptyArray</a></li><li class="tsd-kind-function tsd-parent-kind-module tsd-has-type-parameter"><a class="category__link tsd-kind-icon js-category-link" href="modules/lib_helpers.html#isEmptyObject" data-id="/modules/lib_helpers.html#isEmptyObject">isEmptyObject</a></li></ul></li><li><a class="category__link js-category-link category__link--ts" href="modules/lib_permission.html" data-id="/modules/lib_permission.html">permission.ts</a><ul><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/lib_permission.html#Permission" data-id="/modules/lib_permission.html#Permission">Permission</a></li></ul></li><li><a class="category__link js-category-link category__link--ts" href="modules/lib_role.html" data-id="/modules/lib_role.html">role.ts</a><ul><li class="tsd-kind-function tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/lib_role.html#Role" data-id="/modules/lib_role.html#Role">Role</a></li></ul></li></ul></li><li><span class="js-category-title category__title" data-id="root-types"><div class="category__folder" data-id="root-types"></div>types</span><ul class="js-category-list category" data-id="root-types"><li><a class="category__link js-category-link category__link--ts" href="modules/types.html" data-id="/modules/types.html">index.ts</a><ul><li class="tsd-kind-interface tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="interfaces/types.IOptions.html" data-id="/interfaces/types.IOptions.html">IOptions</a></li><li class="tsd-kind-interface tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="interfaces/types.RBACData.html" data-id="/interfaces/types.RBACData.html">RBACData</a></li><li class="tsd-kind-type-alias tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/types.html#Action" data-id="/modules/types.html#Action">Action</a></li><li class="tsd-kind-type-alias tsd-parent-kind-module"><a class="category__link tsd-kind-icon js-category-link" href="modules/types.html#ListMap" data-id="/modules/types.html#ListMap">ListMap</a></li></ul></li></ul></li></ul></div></div></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-variable"><span class="tsd-kind-icon">Variable</span></li><li class="tsd-kind-function"><span class="tsd-kind-icon">Function</span></li><li class="tsd-kind-function tsd-has-type-parameter"><span class="tsd-kind-icon">Function with type parameter</span></li><li class="tsd-kind-type-alias"><span class="tsd-kind-icon">Type alias</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-interface"><span class="tsd-kind-icon">Interface</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script><script src="assets/custom.js"></script></body></html>